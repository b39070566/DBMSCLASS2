-- SQLite version of your schema & data
PRAGMA foreign_keys = ON;

-- ===== TABLES =====

-- MEMBER: MID 自增（取代 MEMBER_MID_SEQ + trigger）
DROP TABLE IF EXISTS MEMBER;
CREATE TABLE MEMBER (
  MID        INTEGER PRIMARY KEY,  -- 自增主鍵；未指定時自動遞增
  NAME       TEXT,
  ACCOUNT    TEXT,
  PASSWORD   TEXT,
  IDENTITY   TEXT
);

-- CART: TNO 自增（取代 CART_TNO_SEQ）
DROP TABLE IF EXISTS CART;
CREATE TABLE CART (
  TNO       INTEGER PRIMARY KEY,   -- 自增主鍵
  MID       INTEGER,
  CARTTIME  TEXT,                  -- 用 TEXT 儲存時間字串
  -- FOREIGN KEY (MID) REFERENCES MEMBER(MID) ON DELETE CASCADE
  -- （若你的資料確定一致性沒問題，再開外鍵約束）
  -- 為避免你現有資料沒有對應列而報錯，先註解掉
  CHECK (typeof(TNO) = 'integer')
);

-- ORDER_LIST: OID 自增（取代 ORDER_OID_SEQ）
DROP TABLE IF EXISTS ORDER_LIST;
CREATE TABLE ORDER_LIST (
  OID        INTEGER PRIMARY KEY,  -- 自增主鍵
  MID        INTEGER,
  ORDERTIME  TEXT,                 -- SQLite 沒有原生 DATE，存成 'YYYY-MM-DD'
  PRICE      INTEGER,
  TNO        INTEGER               -- 與 CART/RECORD 對應用的欄位
  -- 建議：如果要外鍵，須確保唯一性，否則可維持為一般欄位
);

-- PRODUCT：用 PID 當主鍵
DROP TABLE IF EXISTS PRODUCT;
CREATE TABLE PRODUCT (
  PID       TEXT PRIMARY KEY,
  PNAME     TEXT,
  PRICE     INTEGER,
  CATEGORY  TEXT,
  PDESC     TEXT
);

-- RECORD：明細資料
DROP TABLE IF EXISTS RECORD;
CREATE TABLE RECORD (
  TNO        INTEGER,
  PID        TEXT,
  AMOUNT     INTEGER,
  SALEPRICE  INTEGER,
  TOTAL      INTEGER
  -- 若要外鍵，請先確保對應值存在再解除註解
  -- ,FOREIGN KEY (PID) REFERENCES PRODUCT(PID)
  -- ,FOREIGN KEY (TNO) REFERENCES ORDER_LIST(TNO)
);

-- ===== DATA =====

-- MEMBER
INSERT INTO MEMBER (MID, NAME, ACCOUNT, PASSWORD, IDENTITY) VALUES (1, '王大明', 'MINGWANG', 'TEST', 'user');
INSERT INTO MEMBER (MID, NAME, ACCOUNT, PASSWORD, IDENTITY) VALUES (2, '孫小美', 'MAY', 'TEST', 'user');
INSERT INTO MEMBER (MID, NAME, ACCOUNT, PASSWORD, IDENTITY) VALUES (3, '林大偉', 'WEILIN', 'TEST', 'user');
INSERT INTO MEMBER (MID, NAME, ACCOUNT, PASSWORD, IDENTITY) VALUES (4, '陳美環', 'MAYCHANG', 'TEST', 'user');

-- ORDER_LIST
INSERT INTO ORDER_LIST (OID, MID, ORDERTIME, PRICE, TNO) VALUES (1, 4, '2021-07-04', 4350, 1);
INSERT INTO ORDER_LIST (OID, MID, ORDERTIME, PRICE, TNO) VALUES (2, 1, '2021-04-26', 1500, 2);
INSERT INTO ORDER_LIST (OID, MID, ORDERTIME, PRICE, TNO) VALUES (3, 2, '2021-08-18', 1300, 3);
INSERT INTO ORDER_LIST (OID, MID, ORDERTIME, PRICE, TNO) VALUES (4, 3, '2021-05-31', 800, 4);
INSERT INTO ORDER_LIST (OID, MID, ORDERTIME, PRICE, TNO) VALUES (5, 2, '2021-12-09', 700, 5);
INSERT INTO ORDER_LIST (OID, MID, ORDERTIME, PRICE, TNO) VALUES (6, 2, '2021-09-05', 1100, 6);
INSERT INTO ORDER_LIST (OID, MID, ORDERTIME, PRICE, TNO) VALUES (7, 2, '2021-07-16', 1200, 7);
INSERT INTO ORDER_LIST (OID, MID, ORDERTIME, PRICE, TNO) VALUES (8, 4, '2021-02-27', 100, 8);

-- PRODUCT
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('U58046', '商品1234', 888, 'BOOK', '胡錦濤曾講過...（略，原文保留）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('V00111', '英雄', 400, 'DVD', '● 《神話》和《英雄》...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('D11222', '任賢齊專輯三', 300, 'CD', '1990年由新格唱片出版的「再問一次」...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('B20666', 'OLAP進階', 500, 'BOOK', '帶著這些問題，我們一起來審視OLAP進階...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('B10234','管理資訊系統概論',600,'BOOK', '人工智慧、物聯網、大數據...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('B40555','系統分析理論與實務',550,'BOOK', '本書明白揭示結合MDA與UML...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('N41023','test',400,'DVD', '這樣看來，馬辛傑告訴我們...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('N02345','醫療資訊管理',600,'BOOK','本書第三版在電子化醫療創新...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('A12333','資訊安全概論',500,'BOOK','本書主要探討基礎電腦作業系統...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('A12344','圖解資訊系統安全',400,'BOOK','• 國內外知名網站遭到駭客入侵...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('V10889','哈利波特：消失的密室',400,'BOOK','這個夏天結束前...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('V10890','哈利波特：死神的禮物',650,'BOOK','每一次回到水蠟樹街...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('V10891','哈利波特：阿茲卡班的逃犯',400,'BOOK','瑪姬姑姑又要來了！...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('B30771','五月天專輯：第二人生',400,'CD','「亞洲天團」五月天暌違三年...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('B30772','五月天專輯：知足',450,'CD','五月天6首新歌加6年精華...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('D03333','5566專輯',450,'CD','狂賀！發片首日即登各大排行榜冠軍！...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('B30773','五月天專輯：人生無限公司',650,'CD','[ 人生無限公司 ] Life Live...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('B20776','蔡依林專輯：呸Play',600,'CD','首張同時登上美國《時代雜誌》...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('B20778','蔡依林專輯：花蝴蝶',450,'CD','史上最豪華平裝專輯...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('F95191','啦啦啦',100,'DVD','讓一首又一首超有創意的兒歌...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('W42957','真愛一生',300,'BOOK','每個婚姻都需要經營與餵養...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('A13863','MIS',800,'BOOK','人工智慧、物聯網、大數據...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('V10888','哈利波特：混血王子的背叛',500,'CD','如果要讓哈利波特選出自己在霍格華茲中最討厭的一門課...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('B30999','資料庫理論與實務',500,'BOOK','本書涵蓋了實務上常用的資料庫理論...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('B20777','蔡依林專輯二',350,'CD','見怪不怪 美不勝收...（略）');
INSERT INTO PRODUCT (PID, PNAME, PRICE, CATEGORY, PDESC) VALUES ('B51111','電子商務理論與實務',700,'BOOK','各篇章的主題都很符合目前智慧電子商務的環境...（略）');

-- RECORD
INSERT INTO RECORD (TNO, PID, AMOUNT, SALEPRICE, TOTAL) VALUES (1, 'B51111', 3, 700, 2100);
INSERT INTO RECORD (TNO, PID, AMOUNT, SALEPRICE, TOTAL) VALUES (1, 'D03333', 5, 450, 2250);
INSERT INTO RECORD (TNO, PID, AMOUNT, SALEPRICE, TOTAL) VALUES (2, 'W42957', 3, 300, 900);
INSERT INTO RECORD (TNO, PID, AMOUNT, SALEPRICE, TOTAL) VALUES (2, 'B10234', 1, 600, 600);
INSERT INTO RECORD (TNO, PID, AMOUNT, SALEPRICE, TOTAL) VALUES (3, 'D11222', 3, 300, 900);
INSERT INTO RECORD (TNO, PID, AMOUNT, SALEPRICE, TOTAL) VALUES (3, 'V00111', 1, 400, 400);
INSERT INTO RECORD (TNO, PID, AMOUNT, SALEPRICE, TOTAL) VALUES (4, 'N41023', 2, 400, 800);
INSERT INTO RECORD (TNO, PID, AMOUNT, SALEPRICE, TOTAL) VALUES (5, 'B20777', 2, 350, 700);
INSERT INTO RECORD (TNO, PID, AMOUNT, SALEPRICE, TOTAL) VALUES (6, 'B40555', 2, 550, 1100);
INSERT INTO RECORD (TNO, PID, AMOUNT, SALEPRICE, TOTAL) VALUES (7, 'V00111', 3, 400, 1200);
INSERT INTO RECORD (TNO, PID, AMOUNT, SALEPRICE, TOTAL) VALUES (8, 'F95191', 1, 100, 100);

-- ===== INFO: 下一筆自增值 =====
-- 由於 MEMBER 已有 MID 1..4，下一筆將是 5
-- 由於 ORDER_LIST 已有 OID 1..8，下一筆將是 9
-- CART 目前沒有資料；若你未指定 TNO 插入，將從 1 開始自增
